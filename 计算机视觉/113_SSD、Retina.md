## SSD

![img](https://pic1.zhimg.com/80/v2-a43295a3e146008b2131b160eec09cd4_720w.jpg)

### 正负样本选择

1. 同YOLO
   选择与GT IOU最大的anchor作为正样本。（此时正负样本很不平衡）
2. 对于剩余未匹配anchor，将与GT IOU超过0.5的作为正样本。这样一个GT就可以匹配多个anchor，增加正样本的数量。（此时负样本依然多于正样本）
3. hard negative mining，难负样本挖掘。将所有负样本**按照预测的背景置信度进行降序排序（预测背景的置信度越小，误差越大）**，选择误差大的前几个作为负样本，以保证正负样本比例接近1:3。

### 损失

位置损失：smoothL1。同faster RCNN

置信度误差（类别+背景一体）：softmax loss而不是BCE

### 问题

为什么要在conv4_3使用L2 normalization？

因为conv4比较靠前，数据通道间的特征分布和后续的几层相差较大，所以通过在通道维度进行L2归一化。归一化后一般设置一个可训练的放缩变量gamma。

### 参考链接

[目标检测|SSD原理与实现](https://zhuanlan.zhihu.com/p/33544892)

## RetinaNet

![img](https://pic4.zhimg.com/80/v2-df7543015f3962ccce51e37ed11f57bf_720w.jpg)

### 主要优点

1、多尺度：**借鉴FPN**网络通过自下而上、自上而下的特征提取网络，并通过无代价的横向连接构建增强特征提取网络，利用不同尺度的特征图检测不同大小的目标，**利用了底层高分率的特征图有效的提高了模型对小尺度目标的检测精度**

2、样本不平衡：**引入Focal Loss**用于候选框的【类别预测】，**克服正负样本不平衡的影响及加大困难样本的权重**。

### 主要不足

1、实时性：网络使用ResNet-101作为主干特征提取网络，检测效率略微不足